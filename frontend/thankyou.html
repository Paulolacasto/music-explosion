<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Thank You â€“ THE MUSIC EXPLOSION</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    /* Full-page watermark grid background */
    body::before {
      content: "";
      background-image: url('images/logo-watermark.png');
      background-repeat: repeat;
      background-size: 200px auto;
      opacity: 0.05;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      pointer-events: none;
    }

    /* Only show receipt during print */
    @media print {
  body::before {
    background-image: url('images/logo-watermark.png');
    background-repeat: repeat;
    background-size: 100px auto;
    opacity: 0.03;
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
  }

  body * {
    visibility: hidden;
  }

  #printable-receipt, #printable-receipt * {
    visibility: visible;
  }

  #printable-receipt {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    padding: 20px;
    z-index: 9999;
  }
}

@media print {
  .no-print {
    display: none !important;
  }
}

  </style>
</head>
<body class="bg-white text-gray-800">

  <!-- Header -->
  <header class="bg-blue-900 text-white py-4 px-8 flex justify-between items-center relative z-10">
    <div class="flex items-center space-x-3">
      <img src="images/logo.png" alt="Logo" class="w-20 h-10 object-contain">
      <div>
        <h1 class="text-2xl font-bold leading-tight">THE MUSIC EXPLOSION</h1>
        <p class="text-sm italic text-gray-200">â€¦partake, perfect, perform</p>
      </div>
    </div>
    <nav class="space-x-4">
      <a href="index.html" class="hover:underline">Home</a>
    </nav>
  </header>

  <!-- Thank You Message -->
  <section class="flex flex-col items-center justify-center py-24 px-4 text-center relative z-10">
    <h2 class="text-4xl font-bold text-green-700 mb-4">Payment Successful ðŸŽ‰</h2>
    <p class="text-lg text-gray-700 mb-2">Thank you, <span id="userName">Participant</span>!</p>
    <p class="text-base text-gray-700 mb-2">You have successfully paid <strong>â‚¦<span id="amountPaid">0</span></strong>.</p>
    <p class="text-base text-gray-700 mb-2">Payment Method: <span id="paymentMethod">N/A</span></p>
    <p class="text-sm text-gray-600 mb-2">Reference: <span id="refId">N/A</span></p>
    <p class="text-sm text-gray-500 mb-4">A confirmation has been sent to your email: <strong><span id="email"></span></strong>.</p>

    <div class="flex space-x-4 mt-6">
      <button onclick="printReceipt()" class="no-print bg-green-600 text-white px-6 py-3 rounded hover:bg-green-700 transition">
          Print Receipt
      </button>

      <a href="index.html" class="bg-blue-700 text-white px-6 py-3 rounded hover:bg-blue-800 transition">
        Return to Home
      </a>
    </div>
  </section>

  <!-- Hidden Printable Receipt -->
  <div id="printable-receipt" class="hidden bg-white border border-gray-300 shadow-xl max-w-lg mx-auto p-8 mt-10 rounded text-gray-900 relative z-50">
    <div class="flex justify-center items-center mb-4 space-x-2">
      <img src="images/logo.png" alt="Logo" class="w-12 h-12">
      <h2 class="text-xl font-bold text-center">THE MUSIC EXPLOSION</h2>
    </div>
    <p class="text-center text-sm italic text-gray-600 mb-4">â€¦partake, perfect, perform</p>
    <hr class="mb-4">

    <p><strong>Name:</strong> <span id="rName"></span></p>
    <p><strong>Email:</strong> <span id="rEmail"></span></p>
    <p><strong>Amount Paid:</strong> â‚¦<span id="rAmount"></span></p>
    <p><strong>Payment Method:</strong> <span id="rMethod"></span></p>
    <p><strong>Reference No.:</strong> <span id="rRef"></span></p>
    <p class="text-sm text-gray-600 mt-4">Thank you for registering. See you at the Music Explosion!</p>
  </div>

  <!-- Footer -->
  <footer class="bg-blue-900 text-white py-6 text-center mt-10 relative z-10">
    &copy; 2025 THE MUSIC EXPLOSION. All rights reserved.
  </footer>

  <!-- Script to load receipt data and trigger print -->
  <script>
    const params = new URLSearchParams(window.location.search);

    const name = decodeURIComponent(params.get('name') || 'Participant');
    const ref = decodeURIComponent(params.get('ref') || 'N/A');
    const amount = decodeURIComponent(params.get('amount') || '0');
    const method = decodeURIComponent(params.get('method') || 'Unknown');
    const email = decodeURIComponent(params.get('email') || '');

    // Show on main page
    document.getElementById('userName').textContent = name;
    document.getElementById('refId').textContent = ref;
    document.getElementById('amountPaid').textContent = amount;
    document.getElementById('paymentMethod').textContent = method;
    document.getElementById('email').textContent = email;

    // Fill the receipt
    document.getElementById('rName').textContent = name;
    document.getElementById('rEmail').textContent = email;
    document.getElementById('rAmount').textContent = amount;
    document.getElementById('rMethod').textContent = method;
    document.getElementById('rRef').textContent = ref;

    // Show receipt and trigger print
    function printReceipt() {
      const receipt = document.getElementById('printable-receipt');
      receipt.classList.remove('hidden');
      window.print();
      receipt.classList.add('hidden');
    }
  </script>
</body>
</html>
